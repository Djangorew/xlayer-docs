# Transaction batching
## Rollup or Validium Mode
The trusted sequencer must batch the transactions using the following `BatchData` struct specified in the `ZkEVM.sol` contract:
```
struct BatchData {
        bytes transactions;
        bytes32 transactionsHash;
        bytes32 globalExitRoot;
        uint64 timestamp;
        uint64 minForcedTimestamp;
}
```
The trusted sequencer can choose [Rollup or Validium](https://ethereum.org/en/developers/docs/data-availability/ "Rollup or Validium") mode when invoking the `sequenceBatches` method.
```
function sequenceBatches(
        BatchData[] calldata batches,
        address l2Coinbase,
        bytes calldata signaturesAndAddrs
)
```
- **Rollup**: `BatchData.transactions` data is set using the data from [transactions](/#Transactions), while the `signaturesAndAddrs` field is empty.
- **Validium**: The hash calculated based on the [transactions](/#Transactions) is set as `BatchData.transactionsHash`. [Transactions](/#Transactions) data is signed using the DAC private key from `DataCommittee.sol`, and the resulting signatures are set in the `signaturesAndAddrs` field.

## Batch data parameters
### Transactions
These are byte arrays containing the concatenated batch transactions for rollup mode.
Each transaction is encoded according to the Ethereum pre-EIP-155 or EIP-155 formats using the Recursive-Length Prefix (RLP) standard, but the signature values, `v`,` r`, and `s`, are concatenated as shown below:
1. `EIP-155`:  `rlp(nonce, gasprice, gasLimit, to, value, data, chainid, 0, 0,)`
2. `pre-EIP-155`:  `rlp(nonce,gasprice,gasLimit,to,value,data)`